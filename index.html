<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Stock Analysis Around Tariff Event</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
        }
        .chart-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        .summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .flow-diagram {
            width: 100%;
            height: 500px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        .node {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: lightcoral;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
            border: 2px solid maroon;
            font-size: 12px;
        }
        .arrow {
            position: absolute;
            height: 2px;
            background: maroon;
            transform-origin: left center;
        }
        .arrow:after {
            content: '';
            position: absolute;
            right: -8px;
            top: -4px;
            width: 0;
            height: 0;
            border-left: 8px solid maroon;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }
        .market-impact {
            font-weight: bold;
            color: #c0392b;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <h1>Amazon Stock Analysis Around Tariff Event</h1>
        
        <div class="summary">
            <h2>Key Findings: Market Impact of Tariff Announcements</h2>
            <p>This analysis examines how tariff announcements create market volatility that could potentially be exploited through:</p>
            <ul>
                <li><strong>Insider trading</strong> - Trading based on non-public information about upcoming tariff changes</li>
                <li><strong>Front-running</strong> - Executing trades ahead of large market-moving orders</li>
                <li><strong>Market manipulation</strong> - Artificially influencing prices through false information</li>
            </ul>
            <p>The visualization below shows a hypothetical scenario where a tariff announcement on <span id="eventDate">2025-01-22</span> created:</p>
            <p class="market-impact">Market Drop (S&P 500): <span id="marketDrop">4.25</span>%</p>
        </div>
        
        <div class="chart-container">
            <h2>Amazon (AMZN) Price Action Around Tariff Announcement</h2>
            <canvas id="priceChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h2>Trading Volume (Millions of shares)</h2>
            <canvas id="volumeChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h2>Market Index Impact (S&P 500)</h2>
            <canvas id="marketChart"></canvas>
        </div>
        
        <div class="chart-container">
            <h2>Hypothetical Fund Flow During Tariff Volatility</h2>
            <div class="flow-diagram" id="flowDiagram">
                <!-- Nodes will be positioned here by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const tariffDate = '2025-01-22';
        const daysBefore = 10;
        const daysAfter = 10;
        
        // Sample data - in production you would fetch from an API
        const dates = generateDates(tariffDate, daysBefore, daysAfter);
        const amznData = generateStockData(155, 0.8, dates.length);
        const volumeData = generateVolumeData(45, 80, dates.length);
        const sp500Data = generateStockData(4800, 1.2, dates.length);
        
        // Find event date index
        const eventIndex = dates.indexOf(tariffDate);
        
        // Calculate market drop
        const marketStart = sp500Data[eventIndex - 1];
        const marketLow = Math.min(...sp500Data.slice(eventIndex));
        const marketDrop = ((marketLow - marketStart) / marketStart * 100).toFixed(2);
        document.getElementById('marketDrop').textContent = marketDrop;
        
        // Initialize charts
        initPriceChart();
        initVolumeChart();
        initMarketChart();
        initFlowDiagram();
        
        // Helper functions
        function generateDates(centerDate, daysBefore, daysAfter) {
            const center = new Date(centerDate);
            const dates = [];
            for (let i = -daysBefore; i <= daysAfter; i++) {
                const date = new Date(center);
                date.setDate(center.getDate() + i);
                dates.push(date.toISOString().split('T')[0]);
            }
            return dates;
        }
        
        function generateStockData(base, volatility, count) {
            const data = [];
            let value = base;
            for (let i = 0; i < count; i++) {
                // Simulate price movement with some randomness
                value = value * (1 + (Math.random() - 0.5) * volatility / 100);
                data.push(value);
            }
            // Add a dip around the event date
            if (eventIndex > 0) {
                for (let i = eventIndex; i < eventIndex + 3; i++) {
                    if (i < data.length) {
                        data[i] = data[i] * (1 - 0.02 * (i - eventIndex + 1));
                    }
                }
            }
            return data.map(v => parseFloat(v.toFixed(2)));
        }
        
        function generateVolumeData(base, spike, count) {
            const data = [];
            for (let i = 0; i < count; i++) {
                // Normal volume with random fluctuation
                let value = base * (0.9 + Math.random() * 0.2);
                // Volume spike around event
                if (i >= eventIndex && i <= eventIndex + 2) {
                    value = spike * (0.9 + Math.random() * 0.2);
                }
                data.push(parseInt(value));
            }
            return data;
        }
        
        function initPriceChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'AMZN Closing Price',
                        data: amznData,
                        borderColor: 'darkblue',
                        backgroundColor: 'rgba(0, 0, 139, 0.1)',
                        borderWidth: 
